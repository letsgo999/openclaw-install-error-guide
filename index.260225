<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open CLO Master Troubleshooting Guide</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;800&display=swap');
        body { font-family: 'Pretendard', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-100 antialiased overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icon = ({ name, className }) => {
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const App = () => {
            const [activeStep, setActiveStep] = useState(2); // 새로 추가된 3단계를 기본 활성화

            const steps = [
                {
                    id: "step1",
                    title: "Step 01. 가상화 및 WSL 기초 공사",
                    icon: "power",
                    theme: "blue",
                    content: {
                        originalGoal: "윈도우 안에 리눅스(Ubuntu)를 설치하기 위한 가상화 엔진(WSL2) 활성화",
                        originalCommand: "관리자 권한 CMD에서 'wsl --install' 실행",
                        summary: "하드웨어와 소프트웨어의 가상화 충돌 분석",
                        analysis: [
                            {
                                issue: "ERROR_ALREADY_EXISTS (설치 중복)",
                                cause: "과거 실습 시 이미 WSL 환경이 구축되어 있어 다시 설치가 안 되는 정상적인 상황입니다.",
                                solution: "추가 설치 없이 바로 'wsl' 명령어로 리눅스에 진입하면 됩니다."
                            },
                            {
                                issue: "BIOS 가상화 설정 오류",
                                cause: "CPU의 가상화 기능이 꺼져 있으면 리눅스 설치가 실패합니다.",
                                solution: "컴퓨터 부팅 시 BIOS에 진입하여 VT-x 또는 AMD-V를 'Enabled'로 설정하세요."
                            }
                        ],
                        commands: ["wsl --install", "wsl -l -v", "wsl"]
                    }
                },
                {
                    id: "step2",
                    title: "Step 02. 리눅스 환경 및 엔진 장착",
                    icon: "terminal",
                    theme: "emerald",
                    content: {
                        originalGoal: "Ubuntu 리눅스 내부에 Python, Node.js, Git 등 핵심 엔진 설치",
                        originalCommand: "sudo apt install nodejs npm python3-pip git -y",
                        summary: "엔진 설치 성공 후 버전 체크 및 필수 도구 점검",
                        analysis: [
                            {
                                issue: "Node.js 버전 v18 확인 성공",
                                cause: "최신 에이전트 구동을 위해 v16 이상의 버전이 반드시 필요합니다.",
                                solution: "확인 결과 v18.19.1로 설치되었으므로 가장 최적의 상태입니다."
                            },
                            {
                                issue: "Git 설치 누락",
                                cause: "기본 우분투 설치본에 Git이 포함되지 않아 소스코드 복제가 안 될 수 있습니다.",
                                solution: "반드시 sudo apt install git을 통해 깃을 먼저 확보해야 합니다."
                            }
                        ],
                        commands: ["node -v", "python3 --version", "git --version"]
                    }
                },
                {
                    id: "step3",
                    title: "Step 03. 소스코드 복제 및 로컬 설치",
                    icon: "download-cloud",
                    theme: "rose",
                    content: {
                        originalGoal: "공식 깃허브 저장소의 오픈 클로 코드를 내 컴퓨터로 안전하게 복제",
                        originalCommand: "git clone https://github.com/openclaw/openclaw.git",
                        summary: "복제 과정에서의 '인증 요청'과 '권한 오류' 집중 분석",
                        analysis: [
                            {
                                issue: "Username/Password 입력 요청 (보안 장벽)",
                                cause: "입력한 주소가 틀렸거나 비공개(Private) 저장소일 때 깃허브가 로그인을 요구합니다.",
                                solution: "오타를 확인하고 공식 공개 URL(openclaw/openclaw.git)을 정확히 입력하세요."
                            },
                            {
                                issue: "Permission Denied (권한 거부)",
                                cause: "시스템 루트 폴더(/)에서 복제를 시도할 때 리눅스가 쓰기 권한을 막는 현상입니다.",
                                solution: "반드시 사용자 홈 디렉토리(cd ~)로 이동한 뒤 복제를 진행해야 합니다."
                            },
                            {
                                issue: "설치 폴더 이름 혼동",
                                cause: "복제 후 폴더 안으로 들어가지 않고(cd) 다음 명령을 치면 파일을 찾지 못합니다.",
                                solution: "반드시 cd openclaw 명령어로 해당 폴더에 진입한 뒤 설치를 이어가세요."
                            }
                        ],
                        commands: ["cd ~", "git clone https://github.com/openclaw/openclaw.git", "cd openclaw", "npm install"]
                    }
                },
                {
                    id: "step4",
                    title: "Step 04. API 키 설정 및 메신저 연동",
                    icon: "key",
                    theme: "orange",
                    content: {
                        originalGoal: "Claude/Gemini API 및 텔레그램 봇 토큰 연결 설정",
                        originalCommand: "cp .env.example .env 명령 후 메모장으로 정보 입력",
                        summary: "환경 설정(.env) 파일 생성과 인증 실패 원인 분석",
                        analysis: [
                            {
                                issue: "수정할 .env 파일이 보이지 않음",
                                cause: "리눅스에서 마침표(.)로 시작하는 파일은 '숨김 파일'이라 ls로 안 보입니다.",
                                solution: "ls -a 명령어를 치거나 VS Code의 파일 탐색기를 통해 확인하세요."
                            },
                            {
                                issue: "API 호출 시 401/403 에러",
                                cause: "키값 앞뒤에 불필요한 공백이 있거나 주석(#) 기호를 지우지 않았을 때 발생합니다.",
                                solution: "키값만 정확히 추출하여 따옴표 없이 입력하는 것이 정석입니다."
                            }
                        ],
                        commands: ["cp .env.example .env", "nano .env", "ls -a"]
                    }
                },
                {
                    id: "step5",
                    title: "Step 05. 네트워크 및 원격 접속",
                    icon: "globe",
                    theme: "indigo",
                    content: {
                        originalGoal: "모바일이나 다른 장소에서도 내 AI와 대화할 수 있게 네트워크 개방",
                        originalCommand: "HOST=0.0.0.0 설정 및 Cloudflare Tunnel 실행",
                        summary: "왜 외부 기기에서 내 노트북이 안 보일까? 원인 분석",
                        analysis: [
                            {
                                issue: "HOST=127.0.0.1 고립 현상",
                                cause: "이 설정은 노트북 본체 이외의 모든 접속 요청을 물리적으로 차단합니다.",
                                solution: "반드시 0.0.0.0으로 개방하여 집 밖에서도 접속 가능한 통로를 여세요."
                            }
                        ],
                        commands: ["hostname -I", "cloudflared tunnel --url http://localhost:3000"]
                    }
                },
                {
                    id: "step6",
                    title: "Step 06. 페르소나 및 실무 최적화",
                    icon: "shield-check",
                    theme: "amber",
                    content: {
                        originalGoal: "에이전트에게 고유한 이름과 업무 원칙을 부여하여 실무에 투입",
                        originalCommand: "config/system_prompt.txt 파일에 업무 가이드라인 작성",
                        summary: "에이전트의 지능을 고정시키는 프롬프트 튜닝",
                        analysis: [
                            {
                                issue: "에이전트가 이전 규칙을 계속 사용함",
                                cause: "설정 파일을 고쳐도 메모리에 상주하는 이전 프로세스가 종료되지 않았기 때문입니다.",
                                solution: "터미널에서 Ctrl+C로 확실히 끈 뒤 다시 실행(Restart)해야 반영됩니다."
                            }
                        ],
                        commands: ["vi config/system_prompt.txt", "npm start"]
                    }
                }
            ];

            const current = steps[activeStep];

            return (
                <div className="flex flex-col md:flex-row h-screen bg-slate-100 overflow-hidden">
                    <nav className="w-full md:w-80 bg-slate-900 flex flex-col shadow-2xl z-10 shrink-0">
                        <div className="p-8 border-b border-slate-800">
                            <div className="flex items-center gap-3 text-white mb-2">
                                <Icon name="box" className="text-blue-500 w-6 h-6" />
                                <h1 className="font-black text-xl tracking-tight">Open CLO Lab</h1>
                            </div>
                            <p className="text-xs text-slate-500 font-bold uppercase tracking-widest leading-none">Troubleshooting Guide</p>
                        </div>
                        <div className="flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar text-left">
                            {steps.map((step, idx) => (
                                <button key={step.id} onClick={() => setActiveStep(idx)}
                                    className={`w-full text-left p-4 rounded-2xl transition-all duration-200 flex items-center gap-4 ${activeStep === idx ? 'bg-blue-600 text-white shadow-lg md:translate-x-2' : 'text-slate-400 hover:bg-slate-800 hover:text-slate-200'}`}>
                                    <div className={`p-2 rounded-lg ${activeStep === idx ? 'bg-blue-500' : 'bg-slate-800'}`}>
                                        <Icon name={step.icon} className="w-5 h-5 text-white" />
                                    </div>
                                    <div className="flex flex-col min-w-0">
                                        <p className="text-[10px] font-bold opacity-60 uppercase mb-0.5">Step 0{idx + 1}</p>
                                        <p className="font-bold text-sm leading-tight truncate">{step.title.split('. ')[1]}</p>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </nav>

                    <main className="flex-1 overflow-y-auto bg-white relative custom-scrollbar text-left">
                        <div className="max-w-4xl mx-auto p-8 md:p-12">
                            <header className="mb-12">
                                <div className={`inline-flex items-center justify-center p-4 rounded-3xl mb-6 bg-${current.theme}-100 text-${current.theme}-600 shadow-inner`}>
                                    <Icon name={current.icon} className="w-8 h-8" />
                                </div>
                                <h2 className="text-3xl md:text-4xl font-black text-slate-900 mb-4 tracking-tight">{current.title}</h2>
                                <p className="text-xl text-slate-500 leading-relaxed font-medium">{current.content.summary}</p>
                            </header>

                            <div className="space-y-12">
                                <section className="p-8 rounded-[2rem] bg-slate-50 border-2 border-dashed border-slate-200">
                                    <h3 className="flex items-center gap-2 text-xl font-extrabold text-slate-800 mb-4">
                                        <Icon name="target" className="w-6 h-6 text-blue-600" />
                                        원래 시도했던 목표와 명령
                                    </h3>
                                    <div className="space-y-4">
                                        <div className="flex gap-3">
                                            <span className="font-bold text-slate-400 shrink-0">목표:</span>
                                            <p className="text-slate-700 font-semibold">{current.content.originalGoal}</p>
                                        </div>
                                        <div className="flex gap-3">
                                            <span className="font-bold text-slate-400 shrink-0">명령:</span>
                                            <code className="bg-white px-2 py-0.5 rounded border border-slate-300 text-blue-600 font-bold break-all leading-relaxed">{current.content.originalCommand}</code>
                                        </div>
                                    </div>
                                </section>

                                <section>
                                    <h3 className="flex items-center gap-2 text-xl font-bold text-slate-800 mb-6 pb-2 border-b-2 border-slate-100">
                                        <Icon name="alert-circle" className="w-5 h-5 text-red-500" />
                                        왜 실패했을까? (오류 분석)
                                    </h3>
                                    <div className="grid gap-6">
                                        {current.content.analysis.map((item, idx) => (
                                            <div key={idx} className="group p-6 rounded-3xl border border-slate-100 bg-slate-50 hover:bg-white hover:shadow-xl hover:border-blue-100 transition-all">
                                                <div className="flex items-start gap-4">
                                                    <div className="w-8 h-8 rounded-full bg-white flex items-center justify-center shrink-0 shadow-sm font-bold text-slate-400 group-hover:text-blue-500 group-hover:border-blue-200 border border-slate-200">
                                                        {idx + 1}
                                                    </div>
                                                    <div className="space-y-3">
                                                        <h4 className="font-black text-lg text-slate-800">{item.issue}</h4>
                                                        <div className="space-y-2">
                                                            <p className="text-sm text-slate-500 leading-relaxed">
                                                                <span className="font-bold text-red-400">원인:</span> {item.cause}
                                                            </p>
                                                            <p className="text-sm text-emerald-600 font-bold flex items-center gap-2">
                                                                <Icon name="check-circle-2" className="w-4 h-4" /> 해결: {item.solution}
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </section>

                                <section className="bg-slate-900 rounded-[2.5rem] p-8 text-white shadow-2xl">
                                    <h3 className="flex items-center gap-2 text-lg font-bold mb-6 text-blue-400"><Icon name="code-2" className="w-5 h-5" /> 핵심 복습 명령어</h3>
                                    <div className="space-y-3 font-mono">
                                        {current.content.commands.map((cmd, idx) => (
                                            <div key={idx} className="bg-slate-800/50 p-4 rounded-xl border border-slate-700 flex items-center gap-4 group hover:bg-slate-800 transition-colors">
                                                <span className="text-slate-600 text-xs">$</span>
                                                <span className="text-blue-300 group-hover:text-white transition-colors text-sm break-all">{cmd}</span>
                                            </div>
                                        ))}
                                    </div>
                                </section>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
